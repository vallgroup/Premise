/*! Premise 2015-04-14 */
function premisePrepareAjax(){var a=document.body,b=document.getElementById("premise-ajax"),c=document.getElementById("premise-ajax-overlay"),d=document.getElementById("premise-ajax-inner"),e=document.getElementById("premise-ajax-content");if(!b){var b=document.createElement("div");b.className="premise-ajax",b.id="premise-ajax",b.style.display="none",a.appendChild(b)}if(!c){var c=document.createElement("div");c.className="premise-ajax-overlay",c.id="premise-ajax-overlay",b.appendChild(c)}if(!d){var d=document.createElement("div");d.className="premise-ajax-inner",d.id="premise-ajax-inner",b.appendChild(d)}if(!e){var e=document.createElement("div");e.className="premise-ajax-content",e.id="premise-ajax-content",e.innerHTML=Premise.loadingTimer,d.appendChild(e)}return jQuery(b).fadeIn("fast"),jQuery(document).on("click",".premise-ajax-overlay",premiseCloseAjax),e}function premiseCloseAjax(){return jQuery("#premise-ajax").fadeOut("fast"),jQuery("#premise-ajax-content").remove(),!1}function premiseLoadAjax(a,b){if(b="undefined"!=typeof b?b:null,a="string"==typeof a?a:null,!a)return console.error("ERROR: premiseLoadAjax(). Empty url."),!1;if(!b)return console.error("ERROR: premiseLoadAjax(). Empty data."),!1;var c=premisePrepareAjax();return a&&b?jQuery.post(a,b,function(a){jQuery(c).html(a)}):jQuery(c).load(b),!1}function premiseFormsInit(){Dropzone.autoDiscover=!1,premiseDateField(),premiseMinicolors()}function premiseDateField(a){a=jQuery("undefined"!=typeof a?a:".premise-date-field"),a.datepicker()}function premiseMinicolors(a){a=jQuery("undefined"!=typeof a?a:".premise-minicolors"),a.minicolors()}PremiseField={fields:{file:null,imgUpload:null},dropzone:null,init:function(){this.fields.file=jQuery(".file .premise-file-url"),this.fields.imgUpload=jQuery(".file .premise-image-uploader > div"),premiseFormsInit(),this.dropzoneReady(),this.dropzoneOnSuccess()},dropzoneReady:function(){if(!this.fields.imgUpload)return console.log("no file found"),!1;var a=this.fields.imgUpload,b="undefined"!=typeof a.attr("id")?"#"+a.attr("id"):null,c="undefined"!=typeof a.attr("data-action")?a.attr("data-action"):"/",d="undefined"!=typeof a.attr("data-name")?a.attr("data-name"):"file",e={url:c,paramName:d,uploadMultiple:!0,autoProcessQueue:!1};jQuery(document).trigger("premiseBeforeDropZone",e,a),this.dropzone=new Dropzone(b,e),console.log(this.dropzone),this.dropzone.on("complete",function(a){console.log(a)})},dropzoneOnSuccess:function(){}},jQuery(function(a){Premise.init(),console.log("Premise initiated successfully")}),Premise={loadingTimer:'<span class="premise-ajax-timer"><i class="fa fa-3x fa-spinner fa-spin"></i></span>',init:function(){PremiseField.init()}};